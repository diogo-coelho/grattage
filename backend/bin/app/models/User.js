"use strict";var __awaiter=this&&this.__awaiter||function(e,o,i,u){return new(i=i||Promise)(function(t,r){function a(e){try{n(u.next(e))}catch(e){r(e)}}function s(e){try{n(u.throw(e))}catch(e){r(e)}}function n(e){var r;e.done?t(e.value):((r=e.value)instanceof i?r:new i(function(e){e(r)})).then(a,s)}n((u=u.apply(e,o||[])).next())})},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),require("dotenv/config");const bcrypt_1=__importDefault(require("bcrypt")),UserModelError_1=__importDefault(require("../../errors/UserModelError"));class User{setName(e){if(""===e.trim())throw new UserModelError_1.default(400,"O nome não pode estar vazio");if(!(5<e.length&&e.length<50))throw new UserModelError_1.default(400,"O nome de usuário deve ter entre 5 e 50 caracteres");this._name=e}setAvatar(e){this._avatar=e}setUserName(e){if(e.length<3||50<e.length)throw new UserModelError_1.default(400,"O username deve ter entre 3 e 50 caracteres");if(!/^(?=.*[a-z])([a-z]{3,10})+([.\-_]{0,1})+([a-z0-9]{3,20})$/.test(e))throw new UserModelError_1.default(400,"O username deve ter apenas letras minúsculas, números, ponto, hífen ou underline");this._username=e}setEmail(e){if(!/^(([^<>()[\].,;:\s@"]+(.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/i.test(e))throw new UserModelError_1.default(400,"E-mail inválido");this._email=e}setPassword(r){return __awaiter(this,void 0,void 0,function*(){if(!/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&\)\({}#%])[A-Za-z\d@$!%*?&\)\({}#%]{8,10}/.test(r))throw new UserModelError_1.default(400,"Senha inválida. A senha precisa ter entre 8 e 10 caracteres, com ao menos uma letra maiúscula, uma letra minúscula, um número e um caractere especial");var e=parseInt(process.env.BCRYPT_SALT_ROUNDS),e=yield bcrypt_1.default.hash(r,e);this._password=e})}get name(){return this._name}get avatar(){return this._avatar}get userName(){return this._username}get email(){return this._email}get password(){return this._password}}exports.default=User;